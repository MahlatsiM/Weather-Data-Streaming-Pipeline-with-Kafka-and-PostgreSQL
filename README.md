# Weather Data Streaming Pipeline with Kafka and PostgreSQL

This repository contains a simple data streaming pipeline for weather data using Apache Kafka, PostgreSQL, and Docker. 
Weather data is generated by a Python producer, streamed via Kafka, consumed by Python consumers, and stored in a PostgreSQL database.

---

## Repository Structure

- `docker-compose.yml`  
  Docker Compose file to launch the required services:  
  - Zookeeper  
  - Kafka  
  - PostgreSQL

- `weather-producer.py`  
  Python script that simulates weather stations and produces weather data messages to the Kafka topic `weather-topic`.

- `weather-consumer.py`  
  Python script that consumes weather data from the Kafka topic and prints messages to the console.

- `weather-consumer-db.py`  
  Python script that consumes weather data from Kafka and inserts it into the PostgreSQL `weather_data` table.

---

## Prerequisites

- Docker and Docker Compose installed on your system  
- Python 3.7+  
- Python packages:  
- kafka-python
- psycopg2-binary

1. **Start Docker containers**
   From the project directory, run:
   ```bash
   docker-compose up -d
   ```
   This will start Zookeeper, Kafka, and PostgreSQL containers.

2. **Run the weather data producer**
   In a new terminal, run:
   ```bash
   python weather-producer.py
   ```
   This will start streaming simulated weather data to Kafka.
   
3. **Run the consumer to print messages**
   In another terminal, run:
   ```bash
   python weather-consumer.py
   ```
   You will see weather data messages printed live.
   
4. **Run the consumer to store data in PostgreSQL**
   In a third terminal, run:
   ```bash
   python weather-consumer-db.py
   ```
   This will consume the data and insert it into the weather_data table
   PostgreSQL.

---

## PostgreSQL Database
- Database name: `weather_db`
- User: `postgres`
- Password: set in `docker-compose.yml` (Use your PostgreSQL Password)
- Table: `weather_data` (created automatically by `weather-consumer-db.py`)

---

## Kafka Configuration
- Kafka broker exposed on ports `9092` and `29092`
- Zookeeper on port `2181`
- Kafka topic used: `weather-topic`

--- 

## Notes
- Ensure Python dependencies are installed:
  ```bash
  pip install kafka-python psycopg2-binary
  ```
- The project uses `linux/amd64` platform images in Docker Compose to ensure compatibility.
- You can customise weather stations and data generation in `weather-producer.py.`
